@using HabitTracker.Components.Account.Shared
@inherits LayoutComponentBase
@layout AccountLayout

<div class="container h-100">
    <AuthorizeView>
        <h3 class="p-0 mb-5">
            @(greetingMessage ?? defaultGreetingMessage)
            @context.User.Identity?.Name!</h3>
        <div class="d-flex justify-content-between align-items-center my-3">
            <em class="m-0 h-5">
                Сьогодні, @CurrentDate.ToString("D", CultureInfo.GetCultureInfo("uk-UA"))
            </em>
        </div>

        @Body
    </AuthorizeView>
</div>

@code {
    private const string defaultGreetingMessage = "Вітаю, ";

    private string? greetingMessage;

    private DateTime CurrentDate => DateTime.Now;

    protected override void OnInitialized()
    {
        greetingMessage = CurrentDate.Hour switch
        {
            >= 5 and < 12 => "Доброго ранку, ",
            >= 12 and < 17 => "Доброго дня, ",
            >= 17 and < 22 => "Доброго вечора, ",
            _ => "Вітаю, "
        };

        base.OnInitialized();
    }
}
